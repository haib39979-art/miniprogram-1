<view class="page">
  <view class="header">
    <text class="title">ä»Šæ—¥å®œé£Ÿ</text>
    <view class="date-row">
      <text class="date-text">{{date.full}}</text>
      <view class="divider"></view>
      <text class="date-text">{{date.lunar}}</text>
    </view>
  </view>

  <view class="tags-row">
    <view class="tag" wx:for="{{tags}}" wx:key="*this">{{item}}</view>
  </view>

  <view class="recipe-card" bindtap="onTapRecipe">
    <view class="card-image-wrap">
      <image class="card-image" src="{{recipe.imageUrl}}" mode="aspectFill" />
    </view>
    <view class="card-content">
      <view class="card-header">
        <text class="card-title">{{recipe.name}}</text>
        <view class="favorite-icon {{isFavorite ? 'active' : ''}}" catchtap="onToggleFavorite">{{isFavorite ? 'â™¥' : 'â™¡'}}</view>
      </view>
      <view class="benefits-list">
        <view class="benefit-item" wx:for="{{recipe.benefits}}" wx:key="*this">Â·{{item}}</view>
      </view>
      <view class="suitable-row" catchtap="onTapHealthType">
        <text class="suitable-label">é€‚å®œäººç¾¤ï¼š</text>
        <text class="suitable-val">{{recipe.suitable}}</text>
      </view>
    </view>
  </view>

  <view class="checkin-section">
    <view class="checkin-header">
      <text class="checkin-title">ä»Šæ—¥æ‰“å¡</text>
      <view class="camera-icon" bindtap="onCheckIn">ğŸ“·</view>
    </view>
    <view class="checkin-card {{isCheckedIn ? 'checked' : ''}}">
      <image wx:if="{{checkInImage}}" src="{{checkInImage}}" mode="widthFix" class="checkin-image" bindtap="onCancelCheckIn" />
      <text wx:else class="checkin-text">{{isCheckedIn ? 'å·²å®Œæˆä»Šæ—¥æ‰“å¡' : 'ä»Šæ—¥æœªæ‰“å¡'}}</text>
    </view>
  </view>

  <custom-tabbar active="recipe" />
</view>