<view class="container">
  <!-- Header (Nav Bar) -->
  <view class="header">
    <view class="header-left" bindtap="onTapBack">
      <view class="back-icon">
        <image class="back-arrow" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCAxMiAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTEgMUwyIDEwTDExIDE5IiBzdHJva2U9IiMzMzMzMzMiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L3N2Zz4=" />
      </view>
    </view>
    <view class="header-right">
      <view class="menu-icon">
        <image class="menu-lines" src="data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M3 6H21M3 12H21M3 18H21' stroke='%23333333' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E" />
      </view>
    </view>
  </view>

  <!-- Location and Map Row -->
  <view class="location-row">
    <view class="location-info">
      <view class="location-main">我的位置</view>
      <view class="location-sub">北京，中国</view>
      <view class="location-date">{{dateString}}</view>
    </view>
    <view class="map-box">
      <!-- Simulated Map Thumbnail -->
      <image class="map-bg" src="data:image/svg+xml;charset=utf-8,%3Csvg width='200' height='140' viewBox='0 0 200 140' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='200' height='140' fill='%23E0E0E0'/%3E%3Cpath d='M100 40C120 40 140 60 140 80' stroke='white' stroke-width='4'/%3E%3Cpath d='M60 100C60 80 80 60 100 60' stroke='white' stroke-width='4'/%3E%3Ccircle cx='100' cy='70' r='6' fill='%23FF5252'/%3E%3Cpath d='M100 70L100 85' stroke='%23FF5252' stroke-width='2'/%3E%3C/svg%3E" mode="aspectFill" />
    </view>
  </view>

  <!-- Main Weather Card -->
  <view class="weather-card">
    <view class="weather-content">
      <!-- Left: Sun Icon -->
      <view class="weather-icon-section">
        <image class="sun-icon" src="/assets/sun-icon.png" mode="widthFix" />
        <view class="weather-status">
            <text class="status-main">sunny</text>
            <text class="status-sub">early warning</text>
        </view>
      </view>

      <!-- Right: Info -->
      <view class="weather-info-section">
        <text class="weather-temp">3°</text>
        <text class="weather-feels-like">体感温度：-1°</text>
        <view class="weather-range">
          <text class="range-text">-11°</text>
          <text class="range-text">6°</text>
        </view>
      </view>
    </view>
  </view>

  <!-- Grid Stats -->
  <view class="stats-grid">
    <view class="stat-item" bindtap="onTapWind">
      <view class="stat-icon-box">
        <image class="stat-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTIgOEMxMiA1Ljc5IDEzLjc5IDQgMTYgNEMxOC4yMSA0IDIwIDUuNzkgMjAgOEg0TTE2IDI4QzEzLjc5IDI4IDEyIDI2LjIxIDEyIDI0SDI4TTIzIDE2QzIzIDE4LjIxIDIxLjIxIDIwIDE5IDIwSDR1IiBzdHJva2U9IiM4RDZFNjMiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L3N2Zz4=" />
      </view>
      <text class="stat-label">风</text>
    </view>
    <view class="stat-item" bindtap="onTapHumidity">
      <view class="stat-icon-box">
        <image class="stat-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTYgNEwyMiAxMEMyNS4zMSAxMy4zMSAyNS4zMSAxOC42OSAyMiAyMkMxOC42OSAyNS4zMSAxMy4zMSAyNS4zMSAxMCAyMkM2LjY5IDE4LjY5IDYuNjkgMTMuMzEgMTAgMTBMMTYgNFoiIHN0cm9rZT0iIzhENkU2MyIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvc3ZnPg==" />
      </view>
      <text class="stat-label">湿度</text>
    </view>
    <view class="stat-item" bindtap="onTapUV">
      <view class="stat-icon-box">
        <image class="stat-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSI2IiBzdHJva2U9IiM4RDZFNjMiIHN0cm9rZS13aWR0aD0iMi41Ii8+PHBhdGggZD0iTTE2IDJWNU0xNiAyN1YzME01IDVMOCA4TTI0IDI0TDI3IDI3TTIgMTZINU0yNyAxNkgzME01IDI3TDggMjRNMjQgOEwyNyA1IiBzdHJva2U9IiM4RDZFNjMiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48L3N2Zz4=" />
      </view>
      <text class="stat-label">紫外线</text>
    </view>
  </view>

  <!-- Hourly Forecast -->
  <view class="forecast-section">
    <view class="forecast-title">
      <text class="title-zh">今日</text>
      <text class="title-en">Today</text>
    </view>
    <scroll-view class="forecast-scroll" scroll-x="true" style="width: 100%; white-space: nowrap;">
      <view class="forecast-item {{item.active ? 'active' : ''}}" wx:for="{{hourlyForecast}}" wx:key="time">
        <text class="forecast-time">{{item.time}}</text>
        <view class="forecast-icon-box">
             <image class="forecast-icon" wx:if="{{item.icon === 'wind'}}" src="data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 8C12 5.79 13.79 4 16 4C18.21 4 20 5.79 20 8H4M16 28C13.79 28 12 26.21 12 24H28M23 16C23 18.21 21.21 20 19 20H4' stroke='%23556B2F' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E" />
             <image class="forecast-icon" wx:else src="data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17 17H6C3.79 17 2 15.21 2 13C2 10.79 3.79 9 6 9C6.25 9 6.5 9.03 6.74 9.07C7.3 6.18 9.83 4 12.8 4C16.53 4 19.56 7.03 19.56 10.76C19.56 10.84 19.56 10.92 19.56 11C21.46 11.23 23 12.87 23 14.8C23 16.9 21.1 18.6 19 18.6H17' stroke='%23556B2F' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E" />
        </view>
        <text class="forecast-temp">{{item.temp}}</text>
      </view>
    </scroll-view>
  </view>
  
  <view class="bottom-spacer"></view>
  <custom-tabbar />
</view>